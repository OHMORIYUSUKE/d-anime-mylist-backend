# d-anime-mylist-backend

## é–‹ç™ºã«ã¤ã„ã¦

### ä½œæ¥­å‰ã«

.env ã‚’.env.sample ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆã—ã¦ãã ã•ã„ã€‚

```
$ cp .env.sample .env
```

### ãƒãƒ¼ãƒˆã®èª¬æ˜

`80` : API  
`3030` : phpMyAdmin

### API ã«ã¤ã„ã¦

#### API ã®ä»•æ§˜

`/docs` : openapi(swagger)

#### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```
$ docker exec -it d-anime-mylist-backend-web bash
ã‚³ãƒ³ãƒ†ãƒŠå†… # black .
All done! âœ¨ ğŸ° âœ¨
```

---

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦

`server/app/models/mylist.py`ã«è¨˜è¼‰

`ğŸ”‘`ã¯ä¸»ã‚­ãƒ¼ã€è¤‡åˆä¸»ã‚­ãƒ¼ã‚’ç¤ºã™ã€‚

#### `mylist` ãƒ†ãƒ¼ãƒ–ãƒ«

| mylist_idğŸ”‘             | created_at             | updated_at             |
| ----------------------- | ---------------------- | ---------------------- |
| d-anime ã® mylist ã® id | ã‚«ãƒ©ãƒ ãŒä½œæˆã•ã‚ŒãŸæ™‚é–“ | ã‚«ãƒ©ãƒ ãŒæ›´æ–°ã•ã‚ŒãŸæ™‚é–“ |

#### `mylistContents`ãƒ†ãƒ¼ãƒ–ãƒ«

| mylist_idğŸ”‘             | anime_idğŸ”‘            |
| ----------------------- | --------------------- |
| d-anime ã® mylist ã® id | d-anime ã®ã‚¢ãƒ‹ãƒ¡ã® id |

#### `animeInfo`ãƒ†ãƒ¼ãƒ–ãƒ«

| anime_idğŸ”‘            | title            | image                        | url                               | first                 | stories      |
| --------------------- | ---------------- | ---------------------------- | --------------------------------- | --------------------- | ------------ |
| d-anime ã®ã‚¢ãƒ‹ãƒ¡ã® id | ã‚¢ãƒ‹ãƒ¡ã®ã‚¿ã‚¤ãƒˆãƒ« | ã‚¢ãƒ‹ãƒ¡ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã® URL | ã‚¢ãƒ‹ãƒ¡ã®è©³ç´°ãƒšãƒ¼ã‚¸(d-anime-store) | ã‚¢ãƒ‹ãƒ¡ 1 è©±ã®ã‚¿ã‚¤ãƒˆãƒ« | ã‚¢ãƒ‹ãƒ¡ã®è©±æ•° |

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œã‚Šæ–¹

```
$ docker exec -it d-anime-mylist-backend-web bash
ã‚³ãƒ³ãƒ†ãƒŠå†… # python migrate.py
2022-03-22 09:10:13,777 INFO sqlalchemy.engine.Engine COMMIT
Create Table! âœ¨ ğŸ° âœ¨
```

### ãƒ†ã‚¹ãƒˆ

ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œã®æ–¹æ³•

```
$ docker exec -it d-anime-mylist-backend-web bash
root@web-server:/app/api# cd ../test
root@web-server:/app/test# ./test.sh
```

**failed**ã®ç®‡æ‰€ã¯ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

### æ³¨æ„

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸Šè¨˜ã®æ–¹æ³•ã§ä½œã‚Œãªã„å ´åˆ**ã‚„ã€**phpMyAdmin ã«ã‚¨ãƒ©ãƒ¼ã§å…¥ã‚Œãªã„å ´åˆ**ã¯ã€db ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã® save_data ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚

## ãƒ„ãƒ¼ãƒ«

[d-anime-mylist-scheduler](https://github.com/OHMORIYUSUKE/d-anime-mylist-scheduler)

DB ã®æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚å®šæœŸå®Ÿè¡Œã•ã›ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™»éŒ²ã—ãŸ d ã‚¢ãƒ‹ãƒ¡ã‚¹ãƒˆã‚¢ã®ãƒã‚¤ãƒªã‚¹ãƒˆã®çŠ¶æ…‹ã‚’å®šæœŸçš„ã« DB ã«æ›´æ–°ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
